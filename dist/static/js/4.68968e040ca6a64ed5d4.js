webpackJsonp([4],{"2v17":function(t,s){},LP0A:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=e("c/Tr"),a=e.n(o),i=e("Xxa5"),n=e.n(i),r=e("exGp"),c=e.n(r),l=e("Dd8w"),d=e.n(l),_=(e("MHyw"),e("NYxO")),u=e("GQaK"),f={name:"buyCart",props:["foods_message","shopid"],data:function(){return{is_checked:0}},methods:d()({},Object(_.b)(["SET_SHOP_CAR_LIST","UPDATE_RESTAURANT_GOODS"]),{btnclearAlertcart:function(){this.$parent.btnclearAlert()},getshopmessage:function(t,s){this.is_checked=s},addSpecCart:function(){this.foods_message.specfoods[this.is_checked].goodsnum?this.foods_message.specfoods[this.is_checked].goodsnum=this.foods_message.specfoods[this.is_checked].goodsnum+1:this.$set(this.foods_message.specfoods[this.is_checked],"goodsnum",1),this.UPDATE_RESTAURANT_GOODS(),this.btnclearAlertcart()}})},h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"addcarshop"},[e("ul",{staticClass:"addcarshop_ul"},[e("li",{staticClass:"carshop_name clear"},[t._v(t._s(t.foods_message.name)+"\n      "),e("div",{staticClass:"right",on:{click:t.btnclearAlertcart}},[e("i",{staticClass:"iconfont"},[t._v("")])])]),t._v(" "),e("li",{staticClass:"carshop_message"},[e("h3",[t._v("规格")]),t._v(" "),e("div",t._l(t.foods_message.specfoods,function(s,o){return e("span",{key:o,class:{specs_activity:t.is_checked==o},on:{click:function(e){return t.getshopmessage(s,o)}}},[t._v(" "+t._s(s.specs_name))])}),0)]),t._v(" "),e("li",{staticClass:"carshop_footer clear"},[e("div",{staticClass:"carshop_footer_left   left"},[e("span",[t._v("¥")]),t._v(" "),e("span",[t._v(t._s(t.foods_message.specfoods[0].price))])]),t._v(" "),e("div",{staticClass:"carshop_footer_right left",on:{click:function(s){return t.addSpecCart()}}},[t._v("\n        加入购物车\n      ")])])])])},staticRenderFns:[]};var p=e("VU/8")(f,h,!1,function(t){e("mvhe")},"data-v-8d840384",null).exports,g={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"s-goodsdetail"},[e("div",{staticClass:"s-header clear"},[e("i",{staticClass:"iconfont txtQ_c",on:{click:t.dispage}},[t._v("")]),t._v(" "),e("span",[t._v(t._s(t.goodsdetail.name))]),t._v(" "),e("div",{staticClass:"empty"})]),t._v(" "),e("div",{staticClass:"goods_message"},[e("div",{staticClass:"goods_img"},[e("img",{attrs:{src:"//elm.cangdu.org/img/"+t.goodsdetail.image_path,alt:""}})]),t._v(" "),e("ul",{staticClass:"goods_ul"},[e("li",{staticClass:"goods_name"},[t._v(t._s(t.goodsdetail.name))]),t._v(" "),e("li",{staticClass:"goods_description"},[t._v(t._s(t.goodsdetail.description))]),t._v(" "),e("li",{staticClass:"goods_rate"},[t._v("评分\n          "),e("van-rate",{staticClass:"ll",attrs:{gutter:"0px",size:"0.5rem","allow-half":"",color:"#ff6000",readonly:""},model:{value:t.goodsdetail.rating,callback:function(s){t.$set(t.goodsdetail,"rating",s)},expression:"goodsdetail.rating"}}),t._v(" "),e("span",{staticClass:"col"},[t._v(t._s(t.goodsdetail.rating))])],1),t._v(" "),e("li",{staticClass:"sale"},[t._v("月售 "+t._s(t.goodsdetail.month_sales)+"单\n\n            "),t._v(" "),e("span",{staticClass:"send_price"},[t._v("售价  ¥"+t._s(t.goodsdetail.specfoods[0].price)+"\n            "),t.goodsdetail.specifications.length?e("span",[t._v("起")]):t._e()])]),t._v(" "),e("li",[t._v("评论数 "+t._s(t.goodsdetail.rating_count)+" 好评率 "+t._s(t.goodsdetail.satisfy_rate)+"%")])])])])},staticRenderFns:[]};var v={name:"restaurantgoodslist",components:{Goodsdetail:e("VU/8")({name:"goodsdetail",props:["goodsdetail"],methods:{dispage:function(){this.$parent.disapearpage()}}},g,!1,function(t){e("p3Xx")},"data-v-132ed5d2",null).exports,BuyCart:p},props:["restaurant_goods_list","shopid"],data:function(){return{foodsList:[],foods_category_list:[],menuIndexChange:!0,foods_message:{},shoplisttop:[],menuscroll:null,foodsrcoll:null,menuIndex:0,isalerttip:!1,iszhezhao:!1,goods_num:[],showMoveDot:[],elLeft:"",elBottom:"",windowHeight:null,goodsdetail:"",showgoodsdetail:!1}},methods:d()({},Object(_.b)(["SET_SHOP_CAR_LIST","REMOVE_SHOP_CAR_LIST","SET_RESTAURANT_GOODS","UPDATE_RESTAURANT_GOODS"]),{setgoodsdetail:function(t){this.goodsdetail=t,this.showgoodsdetail=!0},disapearpage:function(){this.showgoodsdetail=!1},allNum:function(t){var s=0;return t.specfoods.forEach(function(t){t.goodsnum>0&&(s=t.goodsnum+s)}),s},btnclearAlert:function(){this.isalerttip=!1,this.iszhezhao=!1,this.foods_message={}},alertTip:function(t){this.isalerttip=!0,this.iszhezhao=!0,this.foods_message=t},getIntData:function(){var t=this;return c()(n.a.mark(function s(){var e;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:0==(e=t.restaurantgoods.filter(function(s){return s.restaurant_id==t.shopid})).length?(t.foodsList=t.restaurant_goods_list,t.SET_RESTAURANT_GOODS({id:t.shopid,data:t.foodsList})):t.foodsList=e,t.$nextTick(function(){t.getAllFoodHeight()}),t.foods_category_list=t.foodsList.map(function(t){return{name:t.name}});case 4:case"end":return s.stop()}},s,t)}))()},btnss:function(t){void 0!=t.specfoods[0].goodsnum?t.specfoods[0].goodsnum=t.specfoods[0].goodsnum+1:this.$set(t.specfoods[0],"goodsnum",1),this.elLeft=event.target.getBoundingClientRect().left,this.elBottom=event.target.getBoundingClientRect().bottom,this.showMoveDot.push(!0),this.UPDATE_RESTAURANT_GOODS()},beforeEnter:function(t){t.style.transform="translate3d(0,"+(37+this.elBottom-this.windowHeight)+"px,0)",t.children[0].style.transform="translate3d("+(this.elLeft-30)+"px,0,0)",t.children[0].style.opacity=0},afterEnter:function(t){var s=this;t.style.transform="translate3d(0,0,0)",t.children[0].style.transform="translate3d(0,0,0)",t.style.transition="transform .55s cubic-bezier(0.3, -0.25, 0.7, -0.15)",t.children[0].style.transition="transform .55s linear",this.showMoveDot=this.showMoveDot.map(function(t){return!1}),t.children[0].style.opacity=1,t.children[0].addEventListener("transitionend",function(){s.$parent.listenInCart()})},reduceCar:function(t){void 0!=t.specfoods[0].goodsnum&&t.specfoods[0].goodsnum>0&&(t.specfoods[0].goodsnum=t.specfoods[0].goodsnum-1),this.UPDATE_RESTAURANT_GOODS()},reducemoreCar:function(){alert("多规格商品只能在购物车删除")},getAllFoodHeight:function(){var t=this,s=this.$refs.tabfootlist;a()(s.children[0].children).forEach(function(s,e){t.shoplisttop[e]=s.offsetTop}),this._initScroll()},_initScroll:function(){var t=this,s=this.$refs.tabmenu.clientHeight;this.menuscroll=new u.a(this.$refs.tabmenu,{click:!0}),this.foodsrcoll=new u.a(this.$refs.tabfootlist,{probeType:3,deceleration:.001,bounce:!1,swipeTime:2e3,click:!0}),this.foodsrcoll.on("scroll",function(e){t.shoplisttop.forEach(function(o,a){if(t.menuIndexChange&&Math.abs(Math.round(e.y))>=o){t.menuIndex=a;var i=t.$refs.tabmenu.querySelectorAll(".s_tab_li_active")[0];t.menuscroll.scrollToElement(i,800,0,-(s/2-50))}})})},chooseMenu:function(t){var s=this,e=this.$refs.tabmenu.clientHeight;this.menuIndex=t,this.menuIndexChange=!1;var o=this.$refs.tabmenu.querySelectorAll(".s_tab_li_active")[0];this.menuscroll.scrollToElement(o,800,0,-(e/2-50)),this.foodsrcoll.scrollTo(0,-this.shoplisttop[t],400),this.foodsrcoll.on("scrollEnd",function(){s.menuIndexChange=!0})}}),mounted:function(){this.getIntData(),this.windowHeight=window.innerHeight},computed:d()({},Object(_.d)(["shopCarList","restaurantgoods"]),Object(_.c)(["shopcard","allcategorynum"]),{cardata:function(){return this.shopcard(this.shopid)},categoryGoodsNum:function(){return this.allcategorynum(this.shopid)}}),watch:{restaurant_goods_list:function(){this.getIntData()}}},m={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"s-content"},[e("div",{staticClass:"s-content-tab clear"},[e("section",{ref:"tabmenu",staticClass:"s-tab-list left"},[e("ul",t._l(t.foods_category_list,function(s,o){return e("li",{key:o,staticClass:"s-tab-li",class:{s_tab_li_active:o==t.menuIndex},on:{click:function(s){return t.chooseMenu(o)}}},[t._v(t._s(s.name)+"\n        "),t.categoryGoodsNum[o]>0?e("span",{staticClass:"category_num"},[t._v(t._s(t.categoryGoodsNum[o]))]):t._e()])}),0)]),t._v(" "),e("section",{ref:"tabfootlist",staticClass:"s-content-list left"},[e("ul",t._l(t.foodsList,function(s,o){return e("li",[e("div",{key:o,staticClass:"s-content-list-title"},[e("b",[t._v("\n              "+t._s(s.name)+"\n\n\n            ")]),t._v(" "),e("span",[t._v(t._s(s.description))])]),t._v(" "),e("ul",{staticClass:"s-goods-list"},t._l(s.foods,function(s,o){return e("li",{key:o,staticClass:"s-goods-list-li clear",on:{click:function(e){return t.setgoodsdetail(s)}}},[e("div",{staticClass:"goods-img left"},[e("img",{attrs:{src:"//elm.cangdu.org/img/"+s.image_path,alt:""}})]),t._v(" "),e("ul",{staticClass:"goods-message left"},[e("li",{staticClass:"goods-name clear"},[t._v("\n                  "+t._s(s.name)+"\n                  ")]),t._v(" "),e("li",{staticClass:"goods-desc"},[t._v(t._s(s.description))]),t._v(" "),e("li",[t._v("月售"+t._s(s.month_sales)+"份 好评率"+t._s(s.satisfy_rate)+"%")]),t._v(" "),e("li",{staticClass:"clear"},[e("div",{staticClass:"price left"},[e("span",[t._v("¥")]),t._v(" "),e("span",[t._v(t._s(s.specfoods[0].price))])]),t._v(" "),s.specifications.length?e("span",[t._v("起")]):t._e(),t._v(" "),e("div",{staticClass:"btn right"},[s.specifications.length?e("div",[e("span",{directives:[{name:"show",rawName:"v-show",value:t.allNum(s)>0,expression:"allNum(val)>0"}]},[e("i",{staticClass:"iconfont",staticStyle:{"font-size":"0.7rem"},on:{touchstart:function(s){return s.stopPropagation(),s.preventDefault(),t.reducemoreCar()}}},[t._v("")]),e("span",{staticClass:"num"},[t._v(t._s(t.allNum(s)))])]),t._v(" "),e("button",{staticClass:"get-rule",on:{touchstart:function(e){return e.stopPropagation(),e.preventDefault(),t.alertTip(s)}}},[t._v("选规格")])]):e("div",[e("transition",{attrs:{name:"fade",duration:{enter:500,leave:100}}},[s.specfoods[0].goodsnum>0?e("span",[e("i",{staticClass:"iconfont",staticStyle:{"font-size":"0.7rem",color:"#3190e8"},on:{touchstart:function(e){return e.stopPropagation(),e.preventDefault(),t.reduceCar(s)}}},[t._v("")]),t._v(" "),e("span",{staticClass:"num"},[t._v(t._s(s.specfoods[0].goodsnum))])]):t._e()]),t._v(" "),e("i",{staticClass:"iconfont",staticStyle:{"font-size":"0.75rem",color:"#3190e8"},on:{touchstart:function(e){return e.stopPropagation(),e.preventDefault(),t.btnss(s)}}},[t._v("")])],1)])])])])}),0)])}),0)])]),t._v(" "),t.isalerttip?e("buy-cart",{attrs:{foods_message:t.foods_message,shopid:t.shopid}}):t._e(),t._v(" "),e("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"opacity 0"}},[t.showgoodsdetail?e("goodsdetail",{attrs:{goodsdetail:t.goodsdetail}}):t._e()],1),t._v(" "),t.iszhezhao?e("div",{staticClass:"zhezhao"}):t._e(),t._v(" "),t._l(t.showMoveDot,function(s,o){return e("transition",{key:o,attrs:{appear:""},on:{"after-appear":t.afterEnter,"before-appear":t.beforeEnter}},[s?e("span",{staticClass:"move_dot"},[e("div",{staticClass:"qiu"})]):t._e()])})],2)},staticRenderFns:[]};var C=e("VU/8")(v,m,!1,function(t){e("2v17")},"data-v-01619fe4",null);s.default=C.exports},mvhe:function(t,s){},p3Xx:function(t,s){}});
//# sourceMappingURL=4.68968e040ca6a64ed5d4.js.map