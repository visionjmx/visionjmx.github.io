webpackJsonp([6],{"0Pru":function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("F9+q"),i=(a("bcYq"),a("GQaK")),r=a("MHyw"),n={name:"restaurantrate",props:["ratelist","ratescore","ratetags","shopid"],components:{loading:e.a},data:function(){return{pagescroll:"",offset:0,num:1,isOnlylink:!1,is_loading:!1,isdataend:!1}},methods:{getImgPath:function(t){var s=void 0;return t?(s=-1!==t.indexOf("jpeg")?".jpeg":".png","https://fuss10.elemecdn.com"+("/"+t.substr(0,1)+"/"+t.substr(1,2)+"/"+t.substr(3)+s)):"//elm.cangdu.org/img/default.jpg"},getInitdata:function(){var t=this;this.pagescroll=new i.a(this.$refs.ratemove,{click:!0,probeType:3}),this.pagescroll.on("scroll",function(s){Math.abs(Math.round(s.y))>=Math.abs(Math.round(t.pagescroll.maxScrollY))&&(t.is_loading=!0,t.loadData(),t.pagescroll.refresh())})},loadData:function(){var t=this;this.isOnlylink||(this.isOnlylink=!0,this.offset=this.offset+10,Object(r.l)(this.shopid,this.offset).then(function(s){t.is_loading=!1,t.isOnlylink=!1,s.length<=10&&(t.isdataend=!0),t.$parent.changeRate(s)}))}},mounted:function(){var t=this;this.$nextTick(function(){t.getInitdata()})}},l={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{ref:"ratemove",staticClass:"s-rate"},[a("div",[a("header",{staticClass:"rating_header"},[a("section",{staticClass:"rating_header_left"},[a("p",[t._v(t._s(Number(t.ratescore.food_score).toFixed(1)))]),t._v(" "),a("p",[t._v("综合评价")]),t._v(" "),a("p",[t._v("高于周边商家"+t._s((100*Number(t.ratescore.compare_rating)).toFixed(1))+"%")])]),t._v(" "),a("section",{staticClass:"rating_header_right"},[a("div",{staticClass:"rating_container"},[a("section",{staticClass:"star_container"},[t._m(0),t._v(" "),a("p",[a("van-rate",{staticClass:"left",attrs:{gutter:"0px",size:"0.5rem","allow-half":"",color:"#ff6000",readonly:""},model:{value:t.ratescore.service_score,callback:function(s){t.$set(t.ratescore,"service_score",s)},expression:"ratescore.service_score"}})],1),t._v(" "),a("p",[a("span",{staticClass:"rating_num"},[t._v(t._s(t.ratescore.service_score.toFixed(1)))])])]),t._v(" "),a("section",{staticClass:"star_container"},[t._m(1),t._v(" "),a("p",[a("van-rate",{staticClass:"left",attrs:{gutter:"0px",size:"0.5rem","allow-half":"",color:"#ff6000",readonly:""},model:{value:t.ratescore.overall_score,callback:function(s){t.$set(t.ratescore,"overall_score",s)},expression:"ratescore.overall_score"}})],1),t._v(" "),a("p",[a("span",{staticClass:"rating_num"},[t._v(t._s(t.ratescore.overall_score.toFixed(1)))])])])]),t._v(" "),a("p",{staticClass:"send_time"},[a("span",[t._v("送达时间")]),t._v(" "),a("span",{staticClass:"delivery_time"},[t._v(t._s(t.ratescore.deliver_time)+"分钟")])])])]),t._v(" "),a("ul",{staticClass:"tag_list_ul"},t._l(t.ratetags,function(s,e){return a("li",{key:e,class:{tagActivity:0==e,unsatisfied:s.unsatisfied}},[t._v(t._s(s.name)+"("+t._s(s.count)+")")])}),0),t._v(" "),a("ul",{staticClass:"rating_list_ul"},t._l(t.ratelist,function(s,e){return a("li",{staticClass:"rating_list_li"},[a("img",{staticClass:"user_avatar",attrs:{src:t.getImgPath(s.avatar),alt:""}}),t._v(" "),a("section",{staticClass:"rating_list_details"},[a("header",[a("section",{staticClass:"username_star"},[a("p",{staticClass:"username"},[t._v(t._s(s.username))]),t._v(" "),a("p",{staticClass:"star_desc"}),a("div",{staticClass:"rating_container"},[a("section",{staticClass:"star_container"},[a("van-rate",{staticClass:"left",attrs:{gutter:"0px",size:"0.5rem","allow-half":"",color:"#ff6000",readonly:""},model:{value:4.7,callback:function(s){t.$set(4,"7",s)},expression:"4.7"}})],1),t._v(" "),a("div",{staticClass:"star_overflow",staticStyle:{width:"2rem"}})]),t._v(" "),a("p",[a("span",{staticClass:"time_spent_desc"},[t._v(t._s(s.time_spent_desc))])])]),t._v(" "),a("time",{staticClass:"rated_at"},[t._v(t._s(s.rated_at))])]),t._v(" "),a("ul",{staticClass:"food_img_ul"},t._l(s.item_ratings,function(s,e){return a("li",[s.image_hash?a("img",{attrs:{src:t.getImgPath(s.image_hash)}}):t._e()])}),0),t._v(" "),a("ul",{staticClass:"food_name_ul"},t._l(s.item_ratings,function(s,e){return a("li",{staticClass:"ellipsis"},[t._v("\n            "+t._s(s.food_name)+"\n          ")])}),0)])])}),0)]),t._v(" "),t.is_loading?a("loading"):t._e(),t._v(" "),t.isdataend?a("div",[t._v("没有数据啦，亲")]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("span",{staticClass:"fuwu_tidu"},[this._v("服务态度")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("span",{staticClass:"fuwu_tidu"},[this._v("菜品评价")])])}]};var c=a("VU/8")(n,l,!1,function(t){a("WeQV")},"data-v-46ebcb8c",null);s.default=c.exports},WeQV:function(t,s){}});
//# sourceMappingURL=6.e6c3131d13e646d70527.js.map